<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>{{ page.title | default: "飯田研究室｜文化人類学・地域研究" }}</title>
  <meta name="description" content="{{ page.description | default: '金沢大学 飯田研究室のサイト。お知らせ、研究テーマ、メンバー、プロジェクト、論文など。' }}">
  <link rel="stylesheet" href="/assets/style.css">
</head>
<body>
  {% include header.html %}

  <div class="wrap">
    {% include sidebar.html %}
    <main>
      {{ content }}
    </main>
  </div>

  {% include footer.html %}

  <script>
    // モバイルメニュー
    const btn = document.getElementById('openMenu');
    btn?.addEventListener('click',()=>{
      const nav = document.querySelector('nav.top');
      if(!nav) return;
      if(getComputedStyle(nav).display==='none'){ nav.style.display='block'; }
      else{ nav.style.display='none'; }
    });
    // スムーススクロール
    document.querySelectorAll('a[href^="#"]').forEach(a=>{
      a.addEventListener('click', e=>{
        const id = a.getAttribute('href');
        if(!id || id==="#") return;
        const el = document.querySelector(id);
        if(!el) return;
        e.preventDefault();
        window.scrollTo({top: el.getBoundingClientRect().top + window.scrollY - 72, behavior:'smooth'});
        history.pushState(null, '', id);
      });
    });
  </script>
</body>
</html>
